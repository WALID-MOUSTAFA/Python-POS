{%load static i18n%}
<footer class="main-footer">
	footer
			</footer>

			<!-- Control Sidebar -->
			<aside class="control-sidebar control-sidebar-dark">
				<!-- Control sidebar content goes here -->
			</aside>
			<!-- /.control-sidebar -->
		</div>
		<!-- ./wrapper -->

		<!-- jQuery -->
		<script src="{% static 'plugins/jquery/jquery.min.js' %}"></script>
		<!-- jQuery UI 1.11.4 -->
		<script src="{% static 'plugins/jquery-ui/jquery-ui.min.js' %}"></script>
		<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
		<script>
			$.widget.bridge('uibutton', $.ui.button)
		</script>
		<!-- Bootstrap 4 -->
		

		<!-- ChartJS -->

		<script src="{% static 'plugins/chart.js/Chart.min.js' %}"></script>
		<!-- Sparkline -->
		<script src="{% static 'plugins/sparklines/sparkline.js' %}"></script>
		<!-- JQVMap -->
		<script src="{% static 'plugins/jqvmap/jquery.vmap.min.js' %}"></script>
		<script src="{% static 'plugins/jqvmap/maps/jquery.vmap.usa.js' %}"></script>
		<!-- jQuery Knob Chart -->
		<script src="{% static 'plugins/jquery-knob/jquery.knob.min.js' %}"></script>
		<!-- daterangepicker -->
		<script src="{% static 'plugins/moment/moment.min.js' %}"></script>
		<script src="{% static 'plugins/daterangepicker/daterangepicker.js' %}"></script>
		<!-- Tempusdominus Bootstrap 4 -->
		<script src="{% static 'plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js' %}"></script>
		<!-- Summernote -->
		<script src="{% static 'plugins/summernote/summernote-bs4.min.js' %}"></script>
		<!-- overlayScrollbars -->
		<script src="{% static 'plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js' %}"></script>
		
		<!-- AdminLTE App -->
		<script src="{% static 'dist/js/adminlte.js' %}"></script>
		<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
		<script src="{% static 'dist/js/pages/dashboard.js' %}"></script>
		<!-- AdminLTE for demo purposes -->
		<script src="{% static 'dist/js/demo.js' %}"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.min.js"></script>
		

		<script>
		 window.CSRF = "{{csrf_token}}";

		 (function delete_product_images(){
			 var images = [];
			 
			 $("img.detailed_product_image").on("click", function(){
				 image_name = $(this).data("name");

				 if (images.indexOf(image_name) == -1) {
					 images.push(image_name);
					 $(this).css({borderColor:  "red", borderWidth: 7, borderStyle: "solid"})
				 }else{
					 images.splice(images.indexOf(image_name), 1);
					 $(this).css("border", "none");
					 
				 }
			 }); //end on

			 $("div.detailed_product button#delete_selected_images").on("click", function(){
				 if (confirm ("{%trans 'are you sure you want to delete those pictures?'%}")) {
					 data = {
						 images: images
					 }
					 
					 $.ajax({
						 url: "/en/admin/product/delete_product_images/",
						 type: "POST",
						 data: data,
						 headers:{"X-CSRFToken": window.CSRF},
						 
						 success: function(data){
							 if (data.success == true) {
								 window.location.reload()
							 }
						 }
					 });
					 

				 }
			 }); 
		 }());
		 
		 (function delete_product(){
			 
			 $("button.delete_product").on("click", function(e){
				 
				 if( confirm("{%trans "are you sure you want to delete product?"%}") ){
					 $.ajax({
						 type: "post",
						 headers: {"X-CSRFToken": window.CSRF },
						 url: "/en/admin/product/delete/" + $(this).data("id") + "/",
						 success: function(data){
							 if(data.success == true){
								 var noty = new Noty({
									 
									 type: "success",
									 text: "<i class='fas fa-check-circle fa-lg'></i>" +  data.message,
									 timeout: 1500,
									 closeWith: ['button'],
									 theme: "relax"

								 }).show()
								 setTimeout(function(){
									 window.location.href = "/admin/product/";
								 }, 2000)
							 }
						 }
					 }); //end ajax call

				 } //end confirm

			 });
			 
		 }());


		 (function delete_category(){
			 
			 $("button.delete_category").on("click", function(e){
				 
				 if( confirm("{%trans "are you sure you want to delete category?"%}") ){
					 $.ajax({
						 type: "post",
						 headers: {"X-CSRFToken": window.CSRF },
						 url: "/en/admin/category/delete/" + $(this).data("id"),
						 success: function(data){
							 if(data.success == true){
								 var noty = new Noty({
									 
									 type: "success",
									 text: "<i class='fas fa-check-circle fa-lg'></i>" +  data.message,
									 timeout: 1500,
									 closeWith: ['button'],
									 theme: "relax"

								 }).show()
								 setTimeout(function(){
									 window.location.href = "/admin/category/";
								 }, 2000)
							 }
						 }
					 }); //end ajax call

				 } //end confirm

			 });
			 
		 }());

		 (function delete_user(){
			 
			 $("button.delete_user").on("click", function(e){
				 
				 if( confirm("{%trans "are you sure you want to delete this user?"%}") ){
					 $.ajax({
						 type: "post",
						 headers: {"X-CSRFToken": window.CSRF },
						 url: "/en/admin/delete/" + $(this).data("id"),
						 success: function(data){
							 if(data.success == true){
								 var noty = new Noty({
									 
									 type: "success",
									 text: "<i class='fas fa-check-circle fa-lg'></i>" +  data.message,
									 timeout: 1500,
									 closeWith: ['button'],
									 theme: "relax"

								 }).show()
								 setTimeout(function(){
									 window.location.href = "/admin/";
								 }, 2000)
							 }
						 }
					 }); //end ajax call

				 } //end confirm

			 });
			 
		 }());
		 
		</script>
		
		
		{%for m in messages%}
		
		{%if "error" in m.tags %}
		
		<script>
		 var noty = new Noty({
			 type: "error",
			 text: '{{ m.message}}',
			 timeout: 1500,
			 closeWith: ['button'],
			 theme: "relax"

		 }).show()
		</script>
		{%elif "success in m.tags"%}
		<script>
		 var noty = new Noty({
			 type: "success",
			 text: "<p class='h5 text-capitalize'> <i class='fas fa-check-circle fa-lg'></i> {{m.message}}</p>",
			 timeout: 1500,
			 closeWith: ['button'],
			 theme: "relax",
			 
		 }).show()

		</script>

		{%endif%}
		{%endfor%}
		<script src = "{%static 'js/admin.js' %}"> </script>

</body>
</html>
